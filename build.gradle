plugins {
    id 'java'
    id 'maven'
    id 'maven-publish'
}

group 'org.medibloc.panacea'
version '0.0.7'

sourceCompatibility = JavaVersion.VERSION_1_6
targetCompatibility = JavaVersion.VERSION_1_6

repositories {
    mavenCentral()
}

dependencies {
    compile group: 'org.bitcoinj', name: 'bitcoinj-core', version: '0.14.7'
    compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.6'
    compile group: 'com.fasterxml.jackson.datatype', name: 'jackson-datatype-joda', version: '2.9.8'
    compile group: 'com.google.protobuf', name: 'protobuf-java', version: '3.6.1'
    compile group: 'org.usb4java', name: 'usb4java', version: '1.2.0'
    compile group: 'org.projectlombok', name: 'lombok', version: '1.18.8'
    compile group: 'com.squareup.retrofit2', name: 'retrofit', version: '2.6.0'
    compile group: 'com.squareup.retrofit2', name: 'converter-jackson', version: '2.6.0'
    compile group: 'commons-codec', name: 'commons-codec', version: '1.12'
    compile group: 'commons-net', name: 'commons-net', version: '3.6'
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

test {
    //TODO: enable this test when the panacea-core docker image is ready
    exclude 'org/medibloc/panacea/PanaceaApiRestClientTest.class'
}

publishing {
    repositories {
        maven {
            url = uri("https://maven.pkg.github.com/medibloc/medibloc-panacea-api")
            credentials {
                username = System.getenv("GPR_USER")
                password = System.getenv("GPR_API_KEY")
            }
        }
    }
    publications {
        gpr(MavenPublication) {
            from(components.java)
        }
    }
}
